!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):(t=t||self,e(t.Vue2Storage={}))}(this,function(t){"use strict";function e(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function c(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,c)}u((r=r.apply(t,e||[])).next())})}function n(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var s,c,u=n(t),f=1;f<arguments.length;f++){s=Object(arguments[f]);for(var a in s)i.call(s,a)&&(u[a]=s[a]);if(r){c=r(s);for(var h=0;h<c.length;h++)o.call(s,c[h])&&(u[c[h]]=s[c[h]])}}return u};const c={};class u{get length(){return Object.keys(this.storage).length}get storage(){return c}getItem(t){return t in this.storage?this.storage[t]:null}setItem(t,e){this.storage[t]=e}removeItem(t){t in this.storage&&delete this.storage[t]}clear(){const t=Object.keys(this.storage);for(let e=0;e<=t.length;e++)try{delete this.storage[t[e]]}catch(t){}}}var f,a=new u;!function(t){t.LOCAL="local",t.SESSION="session",t.MEMORY="memory"}(f||(f={}));class h{constructor(t={}){this.setOptions(t)}get length(){return this.keys().length}get prefix(){return this.options.prefix}get name(){return"vue2-storage"}get version(){return"4.0.7"}get driver(){switch(this.options.driver){case f.LOCAL:default:return"undefined"!=typeof window?window.localStorage:a;case f.SESSION:return"undefined"!=typeof window?window.sessionStorage:a;case f.MEMORY:return a}}setOptions(t={}){const e=s({prefix:"app_",driver:f.LOCAL,ttl:864e5},t);this.options=Object.freeze(e)}get(t,e=null){try{const n=this.fromJSON(this.addPrefix(t));return null===n?e:n}catch(t){this.printError(t)}}pull(t,e=null){const n=this.get(t,e);return n!==e&&this.remove(t),n}set(t,e,n={}){try{this.driver.setItem(this.addPrefix(t),this.toJSON(e,n))}catch(t){this.printError(t)}}remember(t,n,r={}){return e(this,void 0,void 0,function*(){let e=this.get(t,null);if(null!==e)return e;try{return e=yield n(),this.set(t,e,r),e}catch(t){this.printError(t)}})}remove(t){try{this.driver.removeItem(this.addPrefix(t))}catch(t){this.printError(t)}}clear(t=!1){try{if(t)this.driver.clear();else{const t=this.keys().filter(t=>t.startsWith(this.options.prefix||""));t.forEach(t=>this.remove(this.removePrefix(t)))}}catch(t){this.printError(t)}}has(t){return this.options.driver!==f.MEMORY?this.addPrefix(t)in this.driver:this.addPrefix(t)in this.driver.storage}key(t){try{const e=this.keys()[t];return this.get(this.removePrefix(e))}catch(t){this.printError(t)}}keys(){return this.options.driver!==f.MEMORY?Object.keys(this.driver):Object.keys(this.driver.storage)}addPrefix(t){return`${this.options.prefix||""}${t}`}removePrefix(t){const e=new RegExp(`^${this.options.prefix||""}`);return t.replace(e,"")}toJSON(t,e={}){const n="ttl"in e?e.ttl:this.options.ttl;return JSON.stringify({value:t,ttl:Date.now()+n})}fromJSON(t){try{const e=JSON.parse(this.driver.getItem(t));return null!==e?"ttl"in e&&Number(e.ttl)<Date.now()?(this.remove(this.removePrefix(t)),null):"value"in e?e.value:e:null}catch(t){return null}}printError(t){console.error(`${this.name}[${this.version}]: ${t.stack}`)}}class l{static install(t,e){const n=new h(e);t.$storage=n,t.prototype.$storage=n}}"undefined"!=typeof window&&(window.Vue2Storage=l),t.Vue2Storage=l,t.default=l,Object.defineProperty(t,"__esModule",{value:!0})});
